# BoostAPI 의 Provider 알아보기 + 인증 분리/격리하기

> [유튜브](https://www.youtube.com/watch?v=Kx5vE4OVxSw&t=398s)

Provider 란 유저 ID 를 담고 있는 객체(유저가 인증 후 받은 아이디를 헤더에 담아서 요청)

스프링 시큐리티는 잘 안씀

- 앞단에서 인증을 다 끝내고, 서비스 서버에 넘어올 때는 사용 안함
- Gateway 에서 인증 처리 완료 후 -> 뒷단 서버에 보내기
- GW 에만 시큐리티가 있으면 되고, 뒷단 서버에서는 사용 안함
- 실무에서 많이 사용하는 구조

Provider 도 도메인으로 해둠 -> 컨트롤러의 아규먼트로 받아오고 있음

스프링 시큐리티는 별로 안 좋아함

- 암기과목...

GW 를 뒀을 때

- 외부 노출은 인증서버(OAuth2)나 게이트웨이
- 뒷단 서버는 인증을 안쓰게
- 게이트웨이에 요청: 헤더에 Authorization: 토큰
- (게이트웨이 인증 성공) 뒷단 서버에 보낼 때: UserId 만 보냄
  - 뒷단 서버는 내부서버고, 받은 요청을 신뢰할 수 있다고 가정할 수 있음
  - 여기서 인증 디비를 뒤지거나 API 호출하거나 할 필요 없음
- 회원 관련 정보가 필요하다면 좀 다를 수 있음
  - 하지만 서비스 특성마다 다를 수 있음. 꼭 조회해야하나? 고민
