# 레이어별 검증 전략

> [유튜브](https://www.youtube.com/watch?v=Xg82L2FZuHg)

각 계층의 dto 검증. 서비스는 blank, null 등 처리만 하고 모델에서 많이 하는데 이러한 방법 괜찮을까?

- 컨트롤러의 request 을 도메인 객체로 변환할 때도 많이 함
  - api 스펙인 request 는 우리가 다루는 온전한 비즈니스 객체로 세팅할 수 있어야 함
  - 그렇기 때문에 앞단에서 검증을 많이함
- nullable 한 것들은 뒤로 안 넘기려함
  - 문자열의 경우 빈 문자열을 넘긴다거나
- 앞단(request dto)에서 로직적인 검증도 하기도함
  - 변환할 때 검증하기도 하고
  - validate() 를 따로 두기도 하고 -> 컨트롤러에서 호출
- `@Valid` 를 많이 사용하지는 않음 -> 테스트 코드 짜기에 사용하지 않는 것이 더 편했음
- 앞단에서 잘 처리를 다 해서 넘긴다면, 서비스에서는 따로 할 것이 없어짐

도메인 객체에서 검증을 많이 하는데 괜찮은가?

- 구현레이어에서 검증을 많이함
- 바깥에서 검증이 잘 되어서 들어온다면, 안 쪽에서 검증할 것이 많지는 않음
- 바깥에서는 스펙에 대한 검증(길이 등), 안쪽에서는 플로우적인 검증
- 하지만 도메인 객체에서 하는 것도 괜찮음
